import{c as k,r as I,o as U,a as j,d as W,b as g,e as l,w as u,u as t,i as B,f as d,F as y,g as T,h as D,v as F,j as p,k as v,t as A,l as b}from"./index-16a7cc8e.js";const E=()=>{const o=k(()=>window.innerWidth),n=k(()=>window.innerHeight);return{containerWidth:o,containerHeight:n}},$="/assets/1flower-bf53759d.jpg",q="/assets/2flowers-2fc8318a.jpg",z="/assets/3flowers-ec470fab.jpg",J="/assets/1lollipop-f61a8477.jpg",K="/assets/2lollipops-71315f3c.jpg",O="/assets/3lollipops-45902d52.jpg",P=[{name:"一颗糖",idx:21,img:J},{name:"两颗糖",idx:22,img:K},{name:"三颗糖",idx:22,img:O},{img:$,idx:1,name:"1 朵太阳花"},{img:q,idx:2,name:"2 朵太阳花"},{img:z,idx:3,name:"3 朵太阳花"}],L=()=>{const o=I(P),n=k(()=>{const s=[];return o.forEach(i=>{for(let a=0;i.count&&a<i.count;a++)s.push(i)}),s});return{gifts:o,rawContent:n}},Q=o=>Math.floor(Math.random()*o),G=function(){return[.1,-.1]},X=()=>{const o=I({});U(()=>{window.TagCanvas.Start("myCanvas","",{noTagsMessage:"请先配置奖品",textColour:null,initial:G(),dragControl:1,textHeight:20})});const n=j(!1),s=j(!1),i=()=>{n.value=!1,s.value=!0,window.TagCanvas.SetSpeed("myCanvas",[5,1])},a=()=>{window.TagCanvas.SetSpeed("myCanvas",G());const{gifts:m,rawContent:w}=L(),h=Q(w.value.length);o.selectedGift=w.value.splice(h,1)[0];for(let r=m.length-1;r>=0;r--)if(m[r].idx===o.selectedGift.idx){const _=m[r];_.count&&_.count--}s.value=!1,n.value=!0,f()},f=()=>{setTimeout(()=>window.TagCanvas.Reload("myCanvas"))};return{lotteryData:o,selected:n,isRunning:s,start:i,stop:a,refresh:f}},Y=["width","height"],Z={href:"#"},ee=["src","alt"],te={class:"d-flex var--absolute actions-bar"},se=W({__name:"AboutView",setup(o){const n=j(!1),{gifts:s,rawContent:i}=L(),{selected:a,isRunning:f,start:m,stop:w,refresh:h,lotteryData:r}=X(),{containerWidth:_,containerHeight:R}=E();return(oe,c)=>{var S;const H=p("var-counter"),M=p("var-form"),V=p("var-dialog"),N=p("var-image"),C=p("var-button");return v(),g(y,null,[l(V,{show:n.value,"onUpdate:show":c[0]||(c[0]=e=>n.value=e),"close-on-click-overlay":"","cancel-button":!1,title:"奖品数量配置",onConfirm:t(h)},{default:u(()=>[l(M,{ref:"form",class:"gifts-form-config"},{default:u(()=>[(v(!0),g(y,null,T(t(s),e=>(v(),g("div",{key:e.idx,class:"config-row"},[d("label",null,A(e.name),1),l(H,{modelValue:e.count,"onUpdate:modelValue":x=>e.count=x},null,8,["modelValue","onUpdate:modelValue"])]))),128))]),_:1},512)]),_:1},8,["show","onConfirm"]),l(V,{show:t(a),"onUpdate:show":c[1]||(c[1]=e=>B(a)?a.value=e:null),"cancel-button":!1,"confirm-button":!1,title:(S=t(r).selectedGift)==null?void 0:S.name},{default:u(()=>{var e;return[l(N,{src:(e=t(r).selectedGift)==null?void 0:e.img},null,8,["src"])]}),_:1},8,["show","title"]),d("canvas",{id:"myCanvas",width:t(_),height:t(R)},[d("ul",null,[(v(!0),g(y,null,T(t(i),(e,x)=>(v(),g("li",{key:x},[d("a",Z,[d("img",{src:e.img,width:"100",height:"100",alt:e.name},null,8,ee)])]))),128))])],8,Y),d("div",te,[l(C,{type:"primary",onClick:c[2]||(c[2]=e=>n.value=!0)},{default:u(()=>[b("配置")]),_:1}),D(l(C,{type:"success",onClick:t(m)},{default:u(()=>[b("开始")]),_:1},8,["onClick"]),[[F,!t(f)]]),D(l(C,{type:"danger",onClick:t(w)},{default:u(()=>[b("停止")]),_:1},8,["onClick"]),[[F,t(f)]])])],64)}}});export{se as default};
