import{c as b,r as I,o as W,a as k,d as B,b as p,e as u,f as a,w as d,g as D,v as T,u as t,i as N,F as j,h as F,j as m,k as v,t as A}from"./index-653fd61d.js";const E=()=>{const n=b(()=>window.innerWidth),o=b(()=>window.innerHeight);return{containerWidth:n,containerHeight:o}},$="/jingan-cao/assets/1flower-bf53759d.jpg",q="/jingan-cao/assets/2flowers-2fc8318a.jpg",z="/jingan-cao/assets/3flowers-ec470fab.jpg",J="/jingan-cao/assets/1lollipop-f61a8477.jpg",K="/jingan-cao/assets/2lollipops-71315f3c.jpg",O="/jingan-cao/assets/3lollipops-45902d52.jpg",P=[{name:"一颗糖",idx:21,img:J},{name:"两颗糖",idx:22,img:K},{name:"三颗糖",idx:22,img:O},{img:$,idx:1,name:"1 朵太阳花"},{img:q,idx:2,name:"2 朵太阳花"},{img:z,idx:3,name:"3 朵太阳花"}],L=()=>{const n=I(P),o=b(()=>{const s=[];return n.forEach(l=>{for(let i=0;l.count&&i<l.count;i++)s.push(l)}),s});return{gifts:n,rawContent:o}},Q=n=>Math.floor(Math.random()*n),G=function(){return[.1,-.1]},X=()=>{const n=I({});W(()=>{window.TagCanvas.Start("myCanvas","",{noTagsMessage:"请先配置奖品",textColour:null,initial:G(),dragControl:1,textHeight:20})});const o=k(!1),s=k(!1),l=()=>{o.value=!1,s.value=!0,window.TagCanvas.SetSpeed("myCanvas",[5,1])},i=()=>{window.TagCanvas.SetSpeed("myCanvas",G());const{gifts:f,rawContent:w}=L(),h=Q(w.value.length);n.selectedGift=w.value.splice(h,1)[0];for(let r=f.length-1;r>=0;r--)if(f[r].idx===n.selectedGift.idx){const _=f[r];_.count&&_.count--}s.value=!1,o.value=!0,g()},g=()=>{setTimeout(()=>window.TagCanvas.Reload("myCanvas"))};return{lotteryData:n,selected:o,isRunning:s,start:l,stop:i,refresh:g}},Y={class:"d-flex var--absolute actions-bar"},Z=["width","height"],ee={href:"#"},te=["src","alt"],ae=B({__name:"AboutView",setup(n){const o=k(!1),{gifts:s,rawContent:l}=L(),{selected:i,isRunning:g,start:f,stop:w,refresh:h,lotteryData:r}=X(),{containerWidth:_,containerHeight:R}=E();return(ne,c)=>{var S;const C=m("var-icon"),y=m("var-button"),H=m("var-counter"),M=m("var-form"),V=m("var-dialog"),U=m("var-image");return v(),p(j,null,[u("div",Y,[a(y,{type:"primary",onClick:c[0]||(c[0]=e=>o.value=!0)},{default:d(()=>[a(C,{name:"cog-outline"})]),_:1}),D(a(y,{type:"success",onClick:t(f)},{default:d(()=>[a(C,{name:"play-circle-outline"})]),_:1},8,["onClick"]),[[T,!t(g)&&t(l).length]]),D(a(y,{type:"danger",onClick:t(w)},{default:d(()=>[a(C,{name:"pin"})]),_:1},8,["onClick"]),[[T,t(g)]])]),a(V,{show:o.value,"onUpdate:show":c[1]||(c[1]=e=>o.value=e),"close-on-click-overlay":"","cancel-button":!1,title:"奖品数量配置",onConfirm:t(h)},{default:d(()=>[a(M,{ref:"form",class:"gifts-form-config"},{default:d(()=>[(v(!0),p(j,null,F(t(s),e=>(v(),p("div",{key:e.idx,class:"config-row"},[u("label",null,A(e.name),1),a(H,{modelValue:e.count,"onUpdate:modelValue":x=>e.count=x},null,8,["modelValue","onUpdate:modelValue"])]))),128))]),_:1},512)]),_:1},8,["show","onConfirm"]),a(V,{show:t(i),"onUpdate:show":c[2]||(c[2]=e=>N(i)?i.value=e:null),"cancel-button":!1,"confirm-button":!1,title:(S=t(r).selectedGift)==null?void 0:S.name},{default:d(()=>{var e;return[a(U,{src:(e=t(r).selectedGift)==null?void 0:e.img},null,8,["src"])]}),_:1},8,["show","title"]),u("canvas",{id:"myCanvas",width:t(_),height:t(R)},[u("ul",null,[(v(!0),p(j,null,F(t(l),(e,x)=>(v(),p("li",{key:x},[u("a",ee,[u("img",{src:e.img,width:"100",height:"100",alt:e.name},null,8,te)])]))),128))])],8,Z)],64)}}});export{ae as default};
