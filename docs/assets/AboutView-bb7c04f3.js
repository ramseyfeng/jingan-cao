import{c as b,r as I,o as W,a as j,d as B,b as p,e as s,w as u,u as e,i as N,f as d,F as S,g as D,h as T,v as F,j as g,k as v,t as A}from"./index-f3e88b87.js";const E=()=>{const o=b(()=>window.innerWidth),n=b(()=>window.innerHeight);return{containerWidth:o,containerHeight:n}},z="/jingan-cao/assets/1flower-bf53759d.jpg",$="/jingan-cao/assets/2flowers-2fc8318a.jpg",q="/jingan-cao/assets/3flowers-ec470fab.jpg",J="/jingan-cao/assets/1lollipop-f61a8477.jpg",K="/jingan-cao/assets/2lollipops-71315f3c.jpg",O="/jingan-cao/assets/3lollipops-45902d52.jpg",P=[{name:"一颗糖",idx:21,img:J},{name:"两颗糖",idx:22,img:K},{name:"三颗糖",idx:22,img:O},{img:z,idx:1,name:"1 朵太阳花"},{img:$,idx:2,name:"2 朵太阳花"},{img:q,idx:3,name:"3 朵太阳花"}],L=()=>{const o=I(P),n=b(()=>{const a=[];return o.forEach(l=>{for(let i=0;l.count&&i<l.count;i++)a.push(l)}),a});return{gifts:o,rawContent:n}},Q=o=>Math.floor(Math.random()*o),G=function(){return[.1,-.1]},X=()=>{const o=I({});W(()=>{window.TagCanvas.Start("myCanvas","",{noTagsMessage:"请先配置奖品",textColour:null,initial:G(),dragControl:1,textHeight:20})});const n=j(!1),a=j(!1),l=()=>{n.value=!1,a.value=!0,window.TagCanvas.SetSpeed("myCanvas",[5,1])},i=()=>{window.TagCanvas.SetSpeed("myCanvas",G());const{gifts:f,rawContent:_}=L(),h=Q(_.value.length);o.selectedGift=_.value.splice(h,1)[0];for(let c=f.length-1;c>=0;c--)if(f[c].idx===o.selectedGift.idx){const w=f[c];w.count&&w.count--}a.value=!1,n.value=!0,m()},m=()=>{setTimeout(()=>window.TagCanvas.Reload("myCanvas"))};return{lotteryData:o,selected:n,isRunning:a,start:l,stop:i,refresh:m}},Y={class:"galaxy-bg"},Z=["width","height"],tt={href:"#"},et=["src","alt"],nt={class:"d-flex var--absolute actions-bar"},at=B({__name:"AboutView",setup(o){const n=j(!1),{gifts:a,rawContent:l}=L(),{selected:i,isRunning:m,start:f,stop:_,refresh:h,lotteryData:c}=X(),{containerWidth:w,containerHeight:R}=E();return(ot,r)=>{var V;const H=g("var-counter"),M=g("var-form"),k=g("var-dialog"),U=g("var-image"),C=g("var-icon"),y=g("var-button");return v(),p("div",Y,[s(k,{show:n.value,"onUpdate:show":r[0]||(r[0]=t=>n.value=t),"close-on-click-overlay":"","cancel-button":!1,title:"奖品数量配置",onConfirm:e(h)},{default:u(()=>[s(M,{ref:"form",class:"gifts-form-config"},{default:u(()=>[(v(!0),p(S,null,D(e(a),t=>(v(),p("div",{key:t.idx,class:"config-row"},[d("label",null,A(t.name),1),s(H,{modelValue:t.count,"onUpdate:modelValue":x=>t.count=x},null,8,["modelValue","onUpdate:modelValue"])]))),128))]),_:1},512)]),_:1},8,["show","onConfirm"]),s(k,{show:e(i),"onUpdate:show":r[1]||(r[1]=t=>N(i)?i.value=t:null),"cancel-button":!1,"confirm-button":!1,title:(V=e(c).selectedGift)==null?void 0:V.name},{default:u(()=>{var t;return[s(U,{src:(t=e(c).selectedGift)==null?void 0:t.img},null,8,["src"])]}),_:1},8,["show","title"]),d("canvas",{id:"myCanvas",width:e(w),height:e(R)},[d("ul",null,[(v(!0),p(S,null,D(e(l),(t,x)=>(v(),p("li",{key:x},[d("a",tt,[d("img",{src:t.img,width:"100",height:"100",alt:t.name},null,8,et)])]))),128))])],8,Z),T(s(y,{type:"success",class:"play-button",onClick:e(f),round:""},{default:u(()=>[s(C,{name:"play-circle-outline",size:"216"})]),_:1},8,["onClick"]),[[F,!e(m)&&!n.value&&e(l).length]]),d("div",nt,[s(y,{type:"primary",onClick:r[2]||(r[2]=t=>n.value=!0),class:"settings-button"},{default:u(()=>[s(C,{name:"cog-outline"})]),_:1}),T(s(y,{type:"danger",onClick:e(_)},{default:u(()=>[s(C,{name:"pin"})]),_:1},8,["onClick"]),[[F,e(m)]])])])}}});export{at as default};
